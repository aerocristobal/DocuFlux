# DocuFlux Environment Configuration
# Copy this file to .env and update values for your deployment

# ============================================
# Security Configuration
# ============================================

# Flask secret key for session encryption
# CRITICAL: Change this in production!
# Generate with: python -c "import secrets; print(secrets.token_hex(32))"
SECRET_KEY=change-me-in-production

# ============================================
# HTTPS / Cloudflare Tunnel Configuration
# ============================================

# Cloudflare Tunnel token (Epic 22.1)
# Create tunnel at: https://one.dash.cloudflare.com/
# Or use: cd cloudflare && ./setup.sh
# CLOUDFLARE_TUNNEL_TOKEN=your-tunnel-token-here

# Enable secure cookies when behind HTTPS proxy (Epic 22.4)
# Set to 'true' when using Cloudflare Tunnel or other HTTPS termination
SESSION_COOKIE_SECURE=false

# Enable ProxyFix middleware (Epic 22.4)
# Set to 'true' when behind Cloudflare Tunnel or reverse proxy
BEHIND_PROXY=false

# ============================================
# Redis Configuration
# ============================================

# Redis authentication password (required - set a strong random value)
# Generate with: python -c "import secrets; print(secrets.token_hex(32))"
REDIS_PASSWORD=change-me-redis-password

# Celery broker (task queue) - DB 0
CELERY_BROKER_URL=redis://:${REDIS_PASSWORD}@redis:6379/0

# Celery result backend - DB 0
CELERY_RESULT_BACKEND=redis://:${REDIS_PASSWORD}@redis:6379/0

# Job metadata and WebSocket storage - DB 1
REDIS_METADATA_URL=redis://:${REDIS_PASSWORD}@redis:6379/1

# ============================================
# Storage Configuration
# ============================================

# File upload storage directory
UPLOAD_FOLDER=data/uploads

# Converted file output directory
OUTPUT_FOLDER=data/outputs

# ============================================
# GPU Configuration (Epic 21)
# ============================================

# Build-time GPU flag (for Docker builds)
# AUTO: Auto-detect GPU during build
# true: Force GPU build (~15GB image)
# false: Force CPU build (~3GB image)
BUILD_GPU=AUTO

# Runtime feature flag (auto-detected by worker)
# MARKER_ENABLED=true

# VRAM allocation for Marker AI (auto-detected by worker)
# INFERENCE_RAM=16

# ============================================
# WebSocket / CORS Configuration
# ============================================

# Restrict Socket.IO WebSocket connections to specific origins (docuflux-60l)
# Default: None (same-origin only). Set to comma-separated origins or '*' to allow all.
# Example: SOCKETIO_CORS_ALLOWED_ORIGINS=https://app.example.com,https://www.example.com
# SOCKETIO_CORS_ALLOWED_ORIGINS=

# ============================================
# Future Configuration (Planned)
# ============================================

# Encryption at Rest (Epic 23)
# MASTER_ENCRYPTION_KEY=your-encryption-key-here

# Redis TLS (Epic 24)
# CELERY_BROKER_URL=rediss://redis:6379/0
# REDIS_METADATA_URL=rediss://redis:6379/1

# Celery Message Signing (Epic 24)
# CELERY_SIGNING_KEY=your-signing-key-here
